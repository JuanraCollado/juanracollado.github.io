
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Espai de documentaci贸 t猫cnica i recursos per a DAW, DAM, ASIX i altres tecnologies.">
      
      
        <meta name="author" content="Juanra Collado">
      
      
        <link rel="canonical" href="https://juanracollado.github.io/cloud/u3_practiques/">
      
      
        <link rel="prev" href="../u3_continguts/">
      
      
        <link rel="next" href="../instruccions/">
      
      
      <link rel="icon" href="../../assets/logos/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>Prctiques - Juanra Collado</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/css/custom.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-P5E4F6M9VJ"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-P5E4F6M9VJ",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-P5E4F6M9VJ",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="red" data-md-color-accent="deep-orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#practica-1-disseny-minim-amb-vpc-subnet-igw" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../.." title="Juanra Collado" class="md-header__button md-logo" aria-label="Juanra Collado" data-md-component="logo">
      
  <img src="../../assets/logos/logo_white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Juanra Collado
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Prctiques
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="red" data-md-color-accent="deep-orange"  aria-label="Cambiar a modo oscuro"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Cambiar a modo oscuro" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="red" data-md-color-accent="deep-orange"  aria-label="Cambiar a modo claro"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Cambiar a modo claro" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="B煤squeda" placeholder="B煤squeda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando b煤squeda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navegaci贸n" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Juanra Collado" class="md-nav__button md-logo" aria-label="Juanra Collado" data-md-component="logo">
      
  <img src="../../assets/logos/logo_white.png" alt="logo">

    </a>
    Juanra Collado
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Benvingut/da
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Introducci贸 al cloud
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Introducci贸 al cloud
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    U0 - RA's i continguts
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            U0 - RA's i continguts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../u0_ra/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Resultats d'aprenentatge (RA's)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../u0_continguts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Continguts
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    U1 - Introducci贸 al n煤vol i a AWS
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            U1 - Introducci贸 al n煤vol i a AWS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../u1_continguts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Continguts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../u1_practiques/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Prctiques
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    U2 - Infraestructura global, serveis principals i seguretat
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            U2 - Infraestructura global, serveis principals i seguretat
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../u2_continguts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Continguts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../u2_practiques/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Prctiques
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" checked>
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    U3 - Xarxes virtuals i serveis de c貌mput
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            U3 - Xarxes virtuals i serveis de c貌mput
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../u3_continguts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Continguts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Prctiques
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Prctiques
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#practica-1-disseny-minim-amb-vpc-subnet-igw" class="md-nav__link">
    <span class="md-ellipsis">
      Prctica 1 - Disseny m铆nim amb VPC + Subnet + IGW
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Prctica 1 - Disseny m铆nim amb VPC + Subnet + IGW">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-creacio-de-la-vpc" class="md-nav__link">
    <span class="md-ellipsis">
      1. Creaci贸 de la VPC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-creacio-de-les-subxarxes" class="md-nav__link">
    <span class="md-ellipsis">
      2. Creaci贸 de les subxarxes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-crear-i-associar-linternet-gateway" class="md-nav__link">
    <span class="md-ellipsis">
      3. Crear i associar l'Internet Gateway
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-crear-la-taula-de-rutes-per-a-la-subxarxa-publica" class="md-nav__link">
    <span class="md-ellipsis">
      4. Crear la taula de rutes per a la subxarxa p煤blica
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-verificacio-de-la-practica" class="md-nav__link">
    <span class="md-ellipsis">
      5. Verificaci贸 de la prctica
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#practica-2-us-de-nacls-en-aws" class="md-nav__link">
    <span class="md-ellipsis">
      Prctica 2 - s de NACL's en AWS
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Prctica 2 - s de NACL&#39;s en AWS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-crear-el-nacl" class="md-nav__link">
    <span class="md-ellipsis">
      1. Crear el NACL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-configuracio-inicial-de-les-regles-nacl" class="md-nav__link">
    <span class="md-ellipsis">
      2. Configuraci贸 inicial de les regles NACL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-bloqueig-de-la-ip-sospitosa" class="md-nav__link">
    <span class="md-ellipsis">
      3. Bloqueig de la IP sospitosa
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-comprovar-el-funcionament" class="md-nav__link">
    <span class="md-ellipsis">
      4. Comprovar el funcionament
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Comprovar el funcionament">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-ssh-intern-ec2-ec2" class="md-nav__link">
    <span class="md-ellipsis">
      4.1. SSH intern (EC2-EC2)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#practica-3-opcional-servidor-web-apache-php-mysql" class="md-nav__link">
    <span class="md-ellipsis">
      Prctica 3 (opcional) - Servidor Web Apache + PHP + MySQL
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#practica-4-funcio-lambda" class="md-nav__link">
    <span class="md-ellipsis">
      Prctica 4 - Funci贸 Lambda
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Prctica 4 - Funci贸 Lambda">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-crear-la-funcio" class="md-nav__link">
    <span class="md-ellipsis">
      1. Crear la funci贸
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-codi-de-la-funcio" class="md-nav__link">
    <span class="md-ellipsis">
      2. Codi de la funci贸
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-test-de-la-funcio" class="md-nav__link">
    <span class="md-ellipsis">
      3. Test de la funci贸
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-revisio-dels-logs" class="md-nav__link">
    <span class="md-ellipsis">
      4. Revisi贸 dels logs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../instruccions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Intruccions d'inter茅s
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../links/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Enlla莽os d'inter茅s
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Material de suport
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Material de suport
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../suport/repasXarxes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Reps de xarxes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#practica-1-disseny-minim-amb-vpc-subnet-igw" class="md-nav__link">
    <span class="md-ellipsis">
      Prctica 1 - Disseny m铆nim amb VPC + Subnet + IGW
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Prctica 1 - Disseny m铆nim amb VPC + Subnet + IGW">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-creacio-de-la-vpc" class="md-nav__link">
    <span class="md-ellipsis">
      1. Creaci贸 de la VPC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-creacio-de-les-subxarxes" class="md-nav__link">
    <span class="md-ellipsis">
      2. Creaci贸 de les subxarxes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-crear-i-associar-linternet-gateway" class="md-nav__link">
    <span class="md-ellipsis">
      3. Crear i associar l'Internet Gateway
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-crear-la-taula-de-rutes-per-a-la-subxarxa-publica" class="md-nav__link">
    <span class="md-ellipsis">
      4. Crear la taula de rutes per a la subxarxa p煤blica
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-verificacio-de-la-practica" class="md-nav__link">
    <span class="md-ellipsis">
      5. Verificaci贸 de la prctica
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#practica-2-us-de-nacls-en-aws" class="md-nav__link">
    <span class="md-ellipsis">
      Prctica 2 - s de NACL's en AWS
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Prctica 2 - s de NACL&#39;s en AWS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-crear-el-nacl" class="md-nav__link">
    <span class="md-ellipsis">
      1. Crear el NACL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-configuracio-inicial-de-les-regles-nacl" class="md-nav__link">
    <span class="md-ellipsis">
      2. Configuraci贸 inicial de les regles NACL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-bloqueig-de-la-ip-sospitosa" class="md-nav__link">
    <span class="md-ellipsis">
      3. Bloqueig de la IP sospitosa
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-comprovar-el-funcionament" class="md-nav__link">
    <span class="md-ellipsis">
      4. Comprovar el funcionament
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Comprovar el funcionament">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-ssh-intern-ec2-ec2" class="md-nav__link">
    <span class="md-ellipsis">
      4.1. SSH intern (EC2-EC2)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#practica-3-opcional-servidor-web-apache-php-mysql" class="md-nav__link">
    <span class="md-ellipsis">
      Prctica 3 (opcional) - Servidor Web Apache + PHP + MySQL
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#practica-4-funcio-lambda" class="md-nav__link">
    <span class="md-ellipsis">
      Prctica 4 - Funci贸 Lambda
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Prctica 4 - Funci贸 Lambda">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-crear-la-funcio" class="md-nav__link">
    <span class="md-ellipsis">
      1. Crear la funci贸
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-codi-de-la-funcio" class="md-nav__link">
    <span class="md-ellipsis">
      2. Codi de la funci贸
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-test-de-la-funcio" class="md-nav__link">
    <span class="md-ellipsis">
      3. Test de la funci贸
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-revisio-dels-logs" class="md-nav__link">
    <span class="md-ellipsis">
      4. Revisi贸 dels logs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>Prctiques</h1>

<div class="admonition note">
<p class="admonition-title">IMPORTANT</p>
<p>Aquestes prctiques no s贸n obligat貌ries, per貌 s铆 recomanables per a poder realitzar els entregables (Aules).</p>
<p>Per comen莽ar a fer aquestes prctiques, es imprescindible haver  completat les de la unitat 2.</p>
</div>
<hr />
<h2 id="practica-1-disseny-minim-amb-vpc-subnet-igw">Prctica 1 - Disseny m铆nim amb VPC + Subnet + IGW</h2>
<p> Objectiu: En aquesta prctica inicial, farem un disseny m铆nim:</p>
<ul>
<li>
<p>Subxarxa p煤blica: per a mquines que necessiten acc茅s p煤blic (servidors web, basti贸). Un basti贸 茅s una porta d'entrada colocada en la subxarxa p煤blica que permet connectar-se a una subxarxa privada. D'aquesta forma, quan un administrador vol entrar a, per exemple, un servidor d'aplicaci贸 o base de dades, primer es conecta al basti贸 i des d'all铆 ja es connectar a les mquines internet. Aix铆 sols obrim ports en una mquina i 茅s m茅s senzill monitoritzar.</p>
</li>
<li>
<p>Subxarxa privada: per a mquines que no han destar exposades (servidors daplicaci贸, bases de dades).</p>
</li>
</ul>
<p><img src="../../assets/u3/p1_9.png" alt="p1_9" class="centered-image-80"/></p>
<h3 id="1-creacio-de-la-vpc">1. Creaci贸 de la VPC</h3>
<ol>
<li>A la consola d'AWS Academy, anirem a VPC-&gt;Your VPC-&gt;Create VPC</li>
<li>
<p>Omplim els camps: </p>
<ol>
<li>
<p><em>VPC name</em>: Li indiquem el nom que volem posar-li a la VPC.</p>
</li>
<li>
<p><em>IPv4 CIDR block</em>: Li indiquem quines s贸n les direccions de xarxa de les que disposar.</p>
</li>
</ol>
</li>
<li>
<p>Crear la VPC.</p>
</li>
</ol>
<p><img src="../../assets/u3/p1_1.png" alt="p1_1" class="centered-image-80"/></p>
<h3 id="2-creacio-de-les-subxarxes">2. Creaci贸 de les subxarxes</h3>
<ol>
<li>A la consola d'AWS Academy, anirem a VPC-&gt;Subnets-&gt;Create Subnet</li>
<li>
<p>Crearem primer la <strong>subxarxa p煤blica</strong>. Omplim els camps:</p>
<ol>
<li>
<p><em>VPC ID</em>: Li indiquem dins de quina xarxa volem tindre la subxarxa. En el nostre cas ser la que hem creat abans.</p>
</li>
<li>
<p><em>Subnet name</em>: Nom per a la subxarxa</p>
</li>
<li>
<p><em>AZ</em>: Triarem la AZ. Podem deixar que AWS ho faja per nosaltres (recomanat)</p>
</li>
<li>
<p><em>IPv4 CIDR block</em>. Indicarem quin bloc d'adreces de la xarxa ens quedarem per aquesta subxarxa. En el nostre cas, gastarem la 10.0.1.0/24 per a la p煤blica i la 10.0.2.0/24 per a la privada.</p>
</li>
</ol>
</li>
</ol>
<p><img src="../../assets/u3/p1_2.png" alt="p1_2" class="centered-image-80"/></p>
<p>3.Crearem ara la <strong>subxarxa privada</strong>.</p>
<p><img src="../../assets/u3/p1_3.png" alt="p1_3" class="centered-image-80"/></p>
<p>4.Ja tenim la subxarxa privada i la subxarxa p煤blica creades i disponibles per a utilitzar</p>
<p><img src="../../assets/u3/p1_4.png" alt="p1_4" class="centered-image-80"/></p>
<div class="admonition tip">
<p class="admonition-title">Connexi贸 de la VPC</p>
<p>Si en aquest punt crearem una instncia dins la VPC, aquesta no seria accesible publicament perqu猫 la VPC no t茅 acc茅s al m贸n exterior per defecte, necessite l'IGW.</p>
</div>
<h3 id="3-crear-i-associar-linternet-gateway">3. Crear i associar l'Internet Gateway</h3>
<ol>
<li>VPC-&gt; Internet Gateways -&gt; Create Internet Gateway<ol>
<li>Li direm <em>Lab-IGW</em>, per exemple.</li>
</ol>
</li>
<li>Una vegada creat, selecciona'l i fes clic en Actions-&gt;Attach to VPC per associar-lo a la nostra VPC. Selecciona la VPC que hem creat al pas 1.</li>
<li>Comprova que el IGW apareix associat al VPC correctament.</li>
</ol>
<p><img src="../../assets/u3/p1_5.png" alt="p1_5" class="centered-image-80"/></p>
<div class="admonition tip">
<p class="admonition-title">Connexi贸 de la VPC</p>
<p>Ara que ja tenim l'IGW associat a la VPC, si provem a connectar des de fora seguir sense deixar-nos. Falta configurar la taula de rutes per a indicar-li a la subxarxa com ha de dirigir el trfic.</p>
</div>
<h3 id="4-crear-la-taula-de-rutes-per-a-la-subxarxa-publica">4. Crear la taula de rutes per a la subxarxa p煤blica</h3>
<ol>
<li>VPC-&gt; Route Tables-&gt;Create route table</li>
<li>Li posem un nom i seleccionem la VPC a la que l'associarem.</li>
<li>Una vegada creada, la seleccionem i Actions-&gt;Edit Routes.</li>
<li>
<p>Afegirem una ruta cap a <em>Internet</em> (0.0.0.0/0) i li direm que per arrivar all铆, tenim que dirigir el trfic cap al IGW que hem creat en el pas anterior.
<img src="../../assets/u3/p1_6.png" alt="p1_6" class="centered-image-80"/></p>
</li>
<li>
<p>Ara cal associar aquesta ruta a la subxarxa p煤blica. Per fer-ho, cal seleccionar la <em>Route Table</em> que acabem de crear i anar a la pestanya <em>Subnet associations</em> i des de <em>Edit Subnet Associations</em> seleccionar la subxarxa p煤blica creada al punt 2. 
<img src="../../assets/u3/p1_7.png" alt="p1_7" class="centered-image-80"/></p>
</li>
</ol>
<p><img src="../../assets/u3/p1_8.png" alt="p1_8" class="centered-image-80"/></p>
<div class="admonition info">
<p class="admonition-title">Route table a la subxarxa privada</p>
<p>Totes les subxarxes, per defecte, tenen acc茅s als elements que estan dins de la mateixa VPC. s per aix貌 pel que no cal crear una RT a la privada, ja que aquesta no volem que tinga acc茅s a Internet, sino que sols es puga accedir des de la privada.</p>
</div>
<h3 id="5-verificacio-de-la-practica">5. Verificaci贸 de la prctica</h3>
<p>1.Comprova que la subxarxa p煤blica t茅 acc茅s a internet. Per fer-ho, pots crear una EC2 i fer un ping cap a l'exterior.</p>
<div class="admonition danger">
<p class="admonition-title">IMPORTANT</p>
<p>s important que durant la creaci贸 del EC2, seleccionem la VPC i la subxarxa en la qual volem que estiga l'EC2, sin贸 ho far a la VPC per defecte.
<img src="../../assets/u3/p1_10.png" alt="p1_10" class="centered-image-50"/></p>
<p><img src="../../assets/u3/p1_11.png" alt="p1_11" class="centered-image-50"/></p>
<p>Tamb茅 茅s important que si 茅s estem a una subxarxa p煤blica (accessible desde fora), li diguem que ens autoassigne una ip p煤blica.</p>
</div>
<p>2.Comprova que la subxarxa privada no t茅 acc茅s a internet. </p>
<p>3.Comprova que entre la subxarxa p煤blica i la privada tenen connexi贸. Recorda que per fer-ho, cal utilitzar les IP's privades ja que ambdues mquines estan dins de la mateixa VPC.</p>
<p>4.Prova a connectar des de el basti贸 al EC2 de la subxarxa privada per SSH. Si cal, dona-li permisos de SG per poder fer-ho.</p>
<div class="admonition info">
<p class="admonition-title">No borrar aquesta prctica</p>
<p>La prctica 2 partix de la prctica 1 per tant s'aconsella no resetejar el laboratori encara.</p>
</div>
<hr />
<h2 id="practica-2-us-de-nacls-en-aws">Prctica 2 - s de NACL's en AWS</h2>
<p>En aquesta prctica treballarem amb Network ACLs (NACLs), un mecanisme de seguretat a nivell de subxarxa dins duna VPC.</p>
<p>Encara que ja has vist com protegir instncies concretes amb Security Groups (SG), aquests sapliquen 煤nicament als punts finals (instncies). Ara, amb els NACLs, aplicarem una segona capa de seguretat que controla el trfic per a totes les instncies duna subxarxa, independentment del seu SG.</p>
<p>Partim de la seg眉ent configuraci贸:</p>
<p><img src="../../assets/u3/p1_9.png" alt="p1_9" class="centered-image-80"/></p>
<ul>
<li>VPC Lab-VPC (CIDR 10.0.0.0/16  dues subxarxes).<ul>
<li>Subnet p煤blica: 10.0.1.0/24 amb IGW i una EC2 accessible amb IP p煤blica.</li>
<li>Subnet privada: 10.0.2.0/24 amb una EC2 a la qual es pot accedir via bastion.</li>
</ul>
</li>
<li>Security Groups predeterminats del laboratori.    </li>
</ul>
<p>Per fer m茅s interessant i didctic l'exemple, instal路larem un Apache a l'EC2 de la subxarxa privada i autoritzarem el trfic HTTP (podem fer-ho modificant el SG que ve per defecto o creant un nou.). A莽貌 ja ho hem fet a la unitat anterior per tant anirem directament a la configuraci贸 del NACL. 
En el moment que fem que el servidor (subxarxa privada) tinga acc茅s per HTTP, automticament es converteix en una subxarxa p煤blica. Com hem dit, es sols per e fer la prctica menys llarga i m茅s didctica.</p>
<p>Imagina que la teua empresa rep un av铆s de seguretat: un rang dIPs est intentant fer atacs SSH de for莽a bruta contra els teu servidor web (l'Apache).</p>
<p>Els teus servidors estan en una subnet privada i ja t茅 SG ben configurat (SSH nom茅s des del bastion, HTTP des de qualsevol lloc).</p>
<p>Problema: Necessitem assegurar que, encara que alg煤 modifique per error un SG en el futur, cap instncia de la subnet privada accepte trfic de lIP sospitosa (203.0.113.25/32).
Aix貌 nom茅s es pot aconseguir amb un NACL.</p>
<h3 id="1-crear-el-nacl">1. Crear el NACL</h3>
<ol>
<li>VPC-&gt;Network ACL's-&gt;Create NACL</li>
<li>Li posem nom: <em>NACL-Privada</em></li>
<li>Seleccionem la VPC en la que ens trobem</li>
<li>Associem el NACL a la subxarxa privada</li>
</ol>
<p><img src="../../assets/u3/p2_1.png" alt="p2_1" class="centered-image-80"/></p>
<h3 id="2-configuracio-inicial-de-les-regles-nacl">2. Configuraci贸 inicial de les regles NACL</h3>
<p>Per a que la nostra NACL no interferisca en el funcionament normal del servidor web com feia fins ara, permetrem trfic d'entrada SSH sols des del basti贸 i HTTP des de qualsevol lloc i trfic d'eixida cap a qualsevol lloc tal i com feia el SG.</p>
<ol>
<li>Inbound rules -&gt; Edit inbound rules -&gt; Add new rule<ul>
<li>ALLOW TCP/22 des de 10.0.1.0/24</li>
<li>ALLOW TCP/80 des de 0.0.0.0/0</li>
</ul>
</li>
</ol>
<p><img src="../../assets/u3/p2_2.png" alt="p2_2" class="centered-image-80"/></p>
<div class="admonition info">
<p class="admonition-title">Rule number</p>
<p>Les NACL's, a difer猫ncia de les SG, tenen ordre de prioritat. El n煤mero que decideix l'ordre de prioritat es el <em>Rule number</em>   , sent m茅s prioritari el m茅s xicotet.</p>
</div>
<p>2.Outbound rules -&gt; Edit outbound rules -&gt; Add new rule
    - ALLOW ALL -&gt; 0.0.0.0/0</p>
<p><img src="../../assets/u3/p2_3.png" alt="p2_3" class="centered-image-80"/></p>
<h3 id="3-bloqueig-de-la-ip-sospitosa">3. Bloqueig de la IP sospitosa</h3>
<p>Afegim una nova regla en Inbound:</p>
<ul>
<li>DENY All trfic des de 203.0.113.25/32.</li>
</ul>
<p>Aquesta regla t茅 prioritat, per tant tenim que assegurar-se que el Rule number siga menor que les anteriors. D'aquesta forma
 encara que les altres regles diguen ALLOW, si el paquet ve daquesta IP es bloqueja.</p>
<p><img src="../../assets/u3/p2_4.png" alt="p2_4" class="centered-image-80"/></p>
<h3 id="4-comprovar-el-funcionament">4. Comprovar el funcionament</h3>
<ol>
<li>SSH desde basti贸 a privada -&gt; OK, estem dins del rang perm茅s (Revisar punt 4.1)</li>
<li>Des de qualsevol mquina, HTTP (per exemple, des del navegador) -&gt; OK. El port 80 est perm茅s per a tots.</li>
<li>Com que no podem simular una IP de forma fcil, confiarem en que si vinguera una connexi贸 d'aquesta direcci贸 es bloquejaria.</li>
</ol>
<div class="admonition info">
<p class="admonition-title">NACL o SG</p>
<p>Els SG s贸n suficients per protegir cas a cas, per貌 no poden fer DENY expl铆cit.
El NACL pot actuar com un tallafocs de subnet: encara que alg煤 err貌niament obri el SG a 0.0.0.0/0, la subnet t茅 un mur per defecte contra IPs sospitoses.</p>
</div>
<h4 id="41-ssh-intern-ec2-ec2">4.1. SSH intern (EC2-EC2)</h4>
<p>A la unitat anterior es va estudiar com connectar per SSH desde un client extern (el nostre terminal del nostre PC, per exemple) a una EC2 que tenim a AWS per貌, i si una vegada connectats a aquesta mquina volem fer SSH a altra mquina que est dins de la VPC, com 茅s el cas d'un basti贸?</p>
<p>Donat que, si ho hem fet b茅, totes les instncies comparteixen les mateixes claus, no es massa complicat. Cal seguir aquests pasos tant en sistemes Linux com Mac. Per a Windows es pot seguir el seg眉ent <a href="https://repost.aws/es/knowledge-center/ec2-linux-private-subnet-bastion-host">article oficial d'AWS</a>.</p>
<p>Aquest proc茅s aprofita que es gasta la mateixa clau per fer un reenviament d'agent SSH i aix铆 evitar que tinga que passar-me la clau <em>.pem</em> a totes les instncies sino que sols t茅 que estar en la primera a la que ens connectem, en aquest cas, el basti贸.</p>
<p>En primer lloc, comprovem que la clau t茅 els permisos adequats (400) i executarem les seg眉ents instruccions des de terminal:</p>
<ul>
<li>
<p>Executem ssh-agent
<div class="highlight"><pre><span></span><code>eval $(ssh-agent)
</code></pre></div></p>
</li>
<li>
<p>Carreguem en mem貌ria la clau privada de la instncia
<div class="highlight"><pre><span></span><code>ssh-add labsuser.pem
</code></pre></div></p>
</li>
<li>
<p>Revisem que la clau s'ha afegit correctament
<div class="highlight"><pre><span></span><code>ssh-add -l
</code></pre></div></p>
</li>
<li>
<p>Ara ja sols ens queda connectar amb l'EC2 de la subxarxa p煤blica. Amb l'opci贸 -A, les claus es mantenen en mem貌ria i no es necessari utilitzar el -i indicant-li el fitxer .pem
<div class="highlight"><pre><span></span><code>ssh -A ec2-user@direcci贸IpPublica
</code></pre></div></p>
</li>
<li>
<p>Una vegada connectats a la instncia p煤blica, des d'ella, podrem connectarnos a la instncia de la subxarxa privada utilitzant la seua direcci贸 IP privada
<div class="highlight"><pre><span></span><code>ssh -A ec2-user@direcci贸IpPrivada
</code></pre></div></p>
</li>
</ul>
<hr />
<h2 id="practica-3-opcional-servidor-web-apache-php-mysql">Prctica 3 (opcional) - Servidor Web Apache + PHP + MySQL</h2>
<p>Sobre una VPC nova, crea dos subxarxes p煤bliques i una privada, cadascuna amb una EC2 amb Ubuntu dins.</p>
<ul>
<li>Una subxarxa p煤blica ser utilitzada com a basti贸 i permetr les connexions SSH de tots.</li>
<li>L'altra subxarxa p煤blica ser per el servidor web i permetr les connexions HTTP de tots i el SSH sols des del basti贸. Aquest servidor web tindr instal路lat un Apache+PHP.</li>
<li>La subxarxa privada tindr el servidor de base de dades amb un mysql al qual sols es podr accedir desde el servidor web al port de la BBDD (3306).</li>
</ul>
<p>Pots trobar a l'apartat <a href="../instruccions/">d'instruccions d'inter茅s</a> un pas a pas sobre com instal路lar Apache+PHP, com instal路lar el servidor de base de dades MySQL, com connectar ambdues instncies i com fer-ho des de PHP.</p>
<p>Si ho aconseguixes, tindrs una infraestructura web protegida simple, dinmica, protegida i resilient.</p>
<div class="admonition tip">
<p class="admonition-title">V铆deo a Aules</p>
<p>Tens un v铆deo a Aules amb un pas a pas de la prctica.</p>
</div>
<hr />
<h2 id="practica-4-funcio-lambda">Prctica 4 - Funci贸 Lambda</h2>
<p>En aquesta prctica crearem una funci贸 Lambda molt simple, la invocarem manualment des del consola (test) i consultarem els logs per comprendre el cicle de vida duna invocaci贸.</p>
<h3 id="1-crear-la-funcio">1. Crear la funci贸</h3>
<ul>
<li>Lambda-&gt;Create function<ul>
<li><strong>Function Name</strong>: Li posem un nom a la funci贸. <em>hello_world_lab</em> (per exemple)</li>
<li><strong>Runtime</strong>: Elegim el llenguatge en el que volem programar la funci贸. Gastarem Node.js (per exemple)</li>
<li><strong>Execution Role</strong>: Triarem un dels existents del laboratori.</li>
</ul>
</li>
</ul>
<p><img src="../../assets/u3/p4_1.png" alt="p4_1" class="centered-image-80"/></p>
<h3 id="2-codi-de-la-funcio">2. Codi de la funci贸</h3>
<ul>
<li>Des de la pestanya de <em>Code</em>, escriurem el codi associat a la nostra funci贸. Podem copiar i pegar el seg眉ent fragment.</li>
</ul>
<div class="highlight"><pre><span></span><code>export const handler = async (event) =&gt; {
  console.log(&quot;Lambda invocada amb l&#39;event:&quot;, JSON.stringify(event));
  return {
      statusCode: 200,
      body: &quot;Hola des de Lambda! Funci贸 &#39;hello_world_lab&#39; executada correctament.&quot;
  };
};
</code></pre></div>
<p>Aquest codi el que fa es quan rep un event, escriu al log el missatge "Lambda invocada..." i torna al client que l'ha cridat un JSON amb codi 200 i com a com un missatge per dir-li que s'ha executat correctament.</p>
<p><img src="../../assets/u3/p4_2.png" alt="p4_2" class="centered-image-80"/></p>
<p>Per a desplegar la funci贸, li donarem al bot贸 <em>Deploy</em></p>
<p><img src="../../assets/u3/p4_3.png" alt="p4_2" class="centered-image-50"/></p>
<h3 id="3-test-de-la-funcio">3. Test de la funci贸</h3>
<p>Des de la pestanya <em>Test</em>, crearem un nou event. Este event simularia el que llan莽aria la funci贸 i podem (si volem), passar-li parmetres en format JSON.</p>
<p><img src="../../assets/u3/p4_4.png" alt="p4_4" class="centered-image-80"/></p>
<p>I una vegada tot configurat, li donem al bot贸 <em>Test</em> i si tot ha anat b茅, ens mostrar el seg眉ent missatge (o similar):</p>
<p><img src="../../assets/u3/p4_5.png" alt="p4_5" class="centered-image-80"/></p>
<p>On podem comprovar que ens est tornant en el que hav铆em programat a la nostra funci贸.</p>
<h3 id="4-revisio-dels-logs">4. Revisi贸 dels logs</h3>
<p>Els logs s贸n sempre molt importants per entendre el cicle de vida i els possibles errors que ens dona un servei o aplicaci贸. En aquest cas, al mateix missatge d'猫xit, tamb茅 ens apareix els logs que s'han generat i podem revisar que el que haviem escrit al <em>console.log</em> apareix al log del sistema junt a altra informaci贸 important.</p>
<p><img src="../../assets/u3/p4_6.png" alt="p4_6" class="centered-image-80"/></p>
<p>Lambda escriu tots els logs a <em>CloudWatch</em>, servei de monitoritzaci贸 que s'estudiar a la unitat 6. Per revisar-ho podem accedir al servei i obrir <em>Log Groups</em>.</p>
<p><img src="../../assets/u3/p4_7.png" alt="p4_7" class="centered-image-80"/></p>
<p>Podem observar con un d'ells 茅s el del Lamba que acabe de crear. Si accedisc a ell i consulte l'煤ltim <em>Log Stream</em> disponible, trobar茅 el log generats per aquest servei en la seua 煤ltima execuci贸, es a dir, la que hem realitzat nosaltres.</p>
<p><img src="../../assets/u3/p4_8.png" alt="p4_8" class="centered-image-80"/></p>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Volver al principio
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/JuanraCollado" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/in/juanra-collado-80206859/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.sections", "navigation.indexes", "navigation.tracking", null, "navigation.sections", "navigation.instant", "navigation.search.highlight", "navigation.search.suggest", "navigation.search", null, "navigation.top", "content.code.copy", "content.code.annotate", "content.code.highlight", "content.code.expand", "content.code.tabs", "header.autohide"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
        <script src="https://fonts.googleapis.com/css2?family=Merriweather+Sans:wght@400;700&amp;family=Red+Hat+Mono:wght@400;700&amp;display=swap"></script>
      
    
  </body>
</html>